<!DOCTYPE html>
<html lang="en-GB">
<head>
  <meta charset="UTF-8" />
  <title>Mr Nathan's GCSE Maths Question Bank</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 0;
      background: #f5f7fb;
    }
    .container {
      max-width: 900px;
      margin: 40px auto;
      background: #ffffff;
      padding: 24px 28px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }
    h1 {
      margin-top: 0;
      font-size: 1.6rem;
      color: #134b9b;
    }
    .subtitle {
      color: #555;
      margin-bottom: 16px;
      font-size: 0.95rem;
    }
    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 16px;
      align-items: center;
    }
    select, button {
      padding: 8px 12px;
      font-size: 0.95rem;
      border-radius: 4px;
      border: 1px solid #c5cbe0;
      background: #ffffff;
      cursor: pointer;
    }
    button {
      background: #134b9b;
      color: #fff;
      border: none;
    }
    button:hover { background: #0f3f84; }
    button:disabled { background:#9fb2d6; cursor:not-allowed; }

    .meta {
      font-size: 0.9rem;
      color: #666;
      margin-bottom: 8px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      align-items: center;
    }
    .question-text {
      font-size: 1.05rem;
      margin: 12px 0 16px;
      white-space: pre-wrap;
    }
    .options {
      list-style: none;
      padding: 0;
      margin: 0 0 16px;
    }
    .options li {
      margin-bottom: 6px;
      line-height: 1.35;
    }
    .option-label {
      display: inline-block;
      width: 20px;
      font-weight: bold;
    }
    .solution {
      border-top: 1px solid #dde3f5;
      margin-top: 12px;
      padding-top: 12px;
      display: none;
      font-size: 0.95rem;
    }
    .solution pre {
      margin: 0;
      white-space: pre-wrap;
      font-family: inherit;
      line-height: 1.35;
    }
    .difficulty { font-weight: bold; }
    .footer-note {
      margin-top: 20px;
      font-size: 0.8rem;
      color: #999;
    }
    .pill {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 999px;
      background: #e7eefe;
      color: #134b9b;
      font-size: 0.75rem;
      margin-right: 0;
    }
    .id-pill {
      margin-left: auto;
      background: #eef3ff;
      color: #0f3f84;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>Mr Nathan's GCSE Maths Question Bank</h1>
    <div class="subtitle">
      Intermediate Tier • Random, regeneratable MCQs with full worked solutions.
    </div>

    <div class="controls">
      <label for="topicSelect">Topic:</label>
      <select id="topicSelect">
        <option value="all">(All topics)</option>
        <option value="Number">Number</option>
        <option value="Algebra">Algebra</option>
        <option value="Geometry & Measure">Geometry & Measure</option>
        <option value="Statistics & Probability">Statistics & Probability</option>
      </select>

      <button id="newQuestionBtn">New Question</button>
      <button id="showSolutionBtn">Show Solution</button>
      <button id="hideSolutionBtn" disabled>Hide Solution</button>
    </div>

    <div class="meta">
      <span id="topicTag" class="pill"></span>
      <span id="skillTag" class="pill"></span>
      <span class="difficulty">Difficulty: <span id="difficultyText"></span></span>
      <span id="idTag" class="pill id-pill"></span>
    </div>

    <div class="question-text" id="questionText">
      Click “New Question” to begin.
    </div>

    <ul class="options" id="optionsList"></ul>

    <div class="solution" id="solutionBlock">
      <strong>Worked solution</strong>
      <pre id="solutionText"></pre>
    </div>

    <div class="footer-note">
      This is a growing question bank. Next goal: make Number fully exam-complete for WJEC GCSE Intermediate Tier.
    </div>
  </div>

<script>
/* =========================
   Utilities (GCSE-faithful)
   ========================= */
function randInt(min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; }
function choice(arr){ return arr[randInt(0, arr.length - 1)]; }
function shuffleArray(arr){
  const copy = arr.slice();
  for(let i = copy.length - 1; i > 0; i--){
    const j = Math.floor(Math.random() * (i + 1));
    [copy[i], copy[j]] = [copy[j], copy[i]];
  }
  return copy;
}
function gcd(a,b){
  a = Math.abs(a); b = Math.abs(b);
  while(b !== 0){ const t = a % b; a = b; b = t; }
  return a;
}

/* Question IDs (human-readable, short, with category prefix) */
function makeID(prefix){
  const t = Date.now().toString(36).slice(-6).toUpperCase();
  const r = Math.random().toString(36).slice(2,6).toUpperCase();
  return `${prefix}-${t}-${r}`;
}

/* Superscripts (no caret powers) */
const SUP = { "0":"⁰","1":"¹","2":"²","3":"³","4":"⁴","5":"⁵","6":"⁶","7":"⁷","8":"⁸","9":"⁹","-":"⁻" };
function toSuperscript(n){
  return String(n).split("").map(ch => SUP[ch] ?? ch).join("");
}

/* Fractions (avoid recurring decimals) */
class Fraction{
  constructor(n,d=1){
    if(d === 0) throw new Error("Denominator 0");
    if(d < 0){ n = -n; d = -d; }
    const g = gcd(n,d);
    this.n = n/g;
    this.d = d/g;
  }
  add(o){ return new Fraction(this.n*o.d + o.n*this.d, this.d*o.d); }
  sub(o){ return new Fraction(this.n*o.d - o.n*this.d, this.d*o.d); }
  mul(o){ return new Fraction(this.n*o.n, this.d*o.d); }
  div(o){ return new Fraction(this.n*o.d, this.d*o.n); }
  toMixedString(){
    if(this.n === 0) return "0";
    const neg = this.n < 0;
    const an = Math.abs(this.n);
    const whole = Math.floor(an / this.d);
    const rem = an % this.d;
    if(rem === 0) return (neg ? "-" : "") + String(whole);
    if(whole === 0) return (neg ? "-" : "") + `${rem}/${this.d}`;
    return (neg ? "-" : "") + `${whole} ${rem}/${this.d}`;
  }
  toFractionString(){
    if(this.d === 1) return String(this.n);
    return `${this.n}/${this.d}`;
  }
}

/* Money formatting: £x.xx (work in pence) */
function moneyFromPence(p){
  const neg = p < 0;
  const ap = Math.abs(p);
  const pounds = Math.floor(ap / 100);
  const pennies = ap % 100;
  return (neg ? "-" : "") + "£" + String(pounds) + "." + String(pennies).padStart(2,"0");
}

/* =========================
   NUMBER generators (exam-complete)
   ========================= */
/* … [REMAINDER UNCHANGED — full engine continues] … */

</script>
</body>
</html>
